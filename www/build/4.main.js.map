{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"4.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HomePage } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomePage),\r\n  ],\r\n  exports: [\r\n    HomePage\r\n  ]\r\n})\r\nexport class HomePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { NavController,IonicPage,MenuController, Platform, Nav, AlertController, ToastController } from 'ionic-angular';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\nimport { GoogleMap, GoogleMapsEvent, LatLng, MarkerOptions, Marker, GoogleMapsAnimation } from '@ionic-native/google-maps';\r\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\r\nimport { AccountsPage } from '../accounts/accounts';\r\nimport { SettingsPage } from '../settings/settings';\r\nimport { UpdateProfilePage } from '../update-profile/update-profile';\r\nimport { NativeGeocoder, NativeGeocoderReverseResult } from '@ionic-native/native-geocoder';\r\nimport { Storage } from '@ionic/Storage';\r\n\r\ndeclare var google;\r\n\r\n@IonicPage()\r\n\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html'\r\n})\r\nexport class HomePage {\r\n\r\n  @ViewChild(Nav) navMenu: Nav;\r\n  @ViewChild('map') mapElement: ElementRef;\r\n  map: GoogleMap;\r\n  username = '';\r\n  email = '';\r\n  address: any;\r\n  addressString: any;\r\n  pages: Array<{title: string, component: any}>\r\n  private storage:Storage;\r\n\r\n  constructor(private toaster: ToastController, private geocoder: NativeGeocoder, private geolocation: Geolocation,\r\n              private alertCtrl: AlertController, private splashScreen: SplashScreen, private statusBar: StatusBar,\r\n              private nav: NavController, private auth: AuthServiceProvider, private menu: MenuController,\r\n              private platform: Platform,storage:Storage) {\r\n                this.storage  = storage;\r\n              }\r\n\r\n  ngOnInit() {\r\n    this.loadMap();\r\n    this.pages = [\r\n        { title: 'Update Profile', component: UpdateProfilePage },\r\n        { title: 'Settings', component: SettingsPage },\r\n        { title: 'Account', component: AccountsPage }\r\n      ];\r\n     \r\n  }\r\n\r\n  public openPage(page) {\r\n    // Reset the content nav to have just this page\r\n    // we wouldn't want the back button to show in this scenario\r\n    this.nav.push(page.component);\r\n  }\r\n \r\n  \r\n  loadMap(){\r\n \r\n    this.geolocation.getCurrentPosition({enableHighAccuracy:true, timeout: 5000}).then((position) => {\r\n \r\n      let location = new LatLng(position.coords.latitude, position.coords.longitude);\r\n        //let location = new LatLng(-34.9290,138.6010);\r\n        this.address = location;\r\n        this.map = new GoogleMap('map', {\r\n          'backgroundColor': 'white',\r\n          'controls': {\r\n            'compass': true,\r\n            'myLocationButton': true,\r\n          },\r\n          'camera': {\r\n            'latLng': location,\r\n            'tilt': 30,\r\n            'zoom': 17,\r\n            'bearing': 50\r\n          }\r\n        });\r\n        this.map.setClickable(false);\r\n        this.map.on(GoogleMapsEvent.MAP_READY).subscribe(() => {\r\n            console.log('Map is ready!');           \r\n            let markerOptions: MarkerOptions = {\r\n              position: location,\r\n              draggable: true,\r\n              animation: GoogleMapsAnimation.DROP,\r\n              icon: 'assets/icon/marker.png'\r\n            };\r\n            this.map.addMarker(markerOptions).then(\r\n              (marker: Marker) => {\r\n                marker.showInfoWindow();\r\n                  this.geocoder.reverseGeocode(position.coords.latitude, position.coords.longitude).then((res: NativeGeocoderReverseResult) => {\r\n                      let input= document.getElementById(\"address\") as HTMLInputElement;\r\n                      let msg = res.houseNumber+', '+ res.street+', '+ res.city+', '+ res.district+', '+ res.countryName;\r\n                      input.value = msg;\r\n                      this.addressString = msg;\r\n                  });\r\n                \r\n                marker.addEventListener(GoogleMapsEvent.MARKER_DRAG_END).subscribe(\r\n                  data => {\r\n                    marker.getPosition().then((LatLng) => {\r\n                    //alert(JSON.stringify(LatLng));\r\n                    this.address = LatLng;\r\n                    this.geocoder.reverseGeocode(LatLng.lat, LatLng.lng).then((res: NativeGeocoderReverseResult) => {\r\n                      let input= document.getElementById(\"displayAddress\") as HTMLInputElement;\r\n                      let msg = res.houseNumber+', '+ res.street+', '+ res.city+', '+ res.district+', '+ res.countryName;\r\n                      input.value = msg;\r\n                      this.addressString = msg;\r\n                      alert(msg);\r\n                    });\r\n                  });\r\n              });\r\n            });\r\n        });\r\n    }, (err) => {\r\n      console.log('Error '+ err.message);\r\n    });\r\n  }\r\n  menuOpened() {\r\n    if(this.map) {\r\n      this.map.setClickable(false);\r\n    }\r\n  }\r\n\r\n  menuClosed() {\r\n    if(this.map) {\r\n      this.map.setClickable(true);\r\n    }\r\n  }\r\n\r\n  logout(){\r\n    this.storage.clear().then(() => {\r\n      console.log('Keys have been cleared');\r\n    });\r\n    this.nav.setRoot('LoginPage');\r\n    \r\n  }\r\n\r\n  createRequest(){\r\n    //console.log(this.address);\r\n    if(this.map) {\r\n      this.map.setClickable(false);\r\n      this.nav.push('CreateRequestPage',{'coordinates': this.address, 'address': this.addressString});\r\n    }\r\n    \r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}